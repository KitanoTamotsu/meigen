## 　　Lesson20.　テキストファイルを行ごとに配列に読み込む 
#### 開発メモ
ワークフロー
<br><img width="600" src="https://user-images.githubusercontent.com/40127279/127756559-c55c4092-a02f-4505-b4ba-6aa495be6b12.png">

### 1.名言追加
　指定のHotkeyを押すと、その時選択している文字列を名言としてファイルに追加します
<br>　名言のファイルには1行に1つの名言と出典を保管するのですが、出典（人名）はユーザーに
<br>　記入してもうらことにしました
<br>　記入が必要になるので、名言はテキストファイルの1行目に追加しています
<br>　（最後に追加すると、出典を書くためにスクロールが必要となる場合がでてきますので）
<br>
<br>　1行目への追加は、割と単純なロジックです
<br>　一旦ファイルから全データを変数に読み込んで、catで出力する時に
<br>　今回追加するものを1行目に、その後に読み込んだ全データを出力させています
<br>
<br>　出力後にファイルをオープンして、記入してもらうスタイルにしています
<br>　ちょっと効率が悪いかもしれませんね　　
<br>
<br>　<img width="600" src="https://user-images.githubusercontent.com/40127279/127756590-d7fd728e-aac6-4144-b793-c6f4c861f76b.png">

### 2.ランダム表示
　今回は、Randomユーティリティを使わずにスクリプトで作ってみました
<br>
<br>　名言のリストは1行に1名言という形式にしていますので
<br>　ランダム表示の前提として、行ごとに配列に読み込ませています
<br>　そのため、区切り文字（IFS）を改行に変更しています
<br>  
<br>　ランダムな選択は$RANDOM変数を名言の件数（読み込んだ行数）で割算した余りを
<br>　利用しています
<br>　なお、zshにしているので、最小値が1となるようにしています
<br>
<br>　最後に、PostNotificationオブジェクトに送るときに、『（』で改行しています
<br>　ランダム表示関連の制御ではないですが、名言収集の際に選択中のテキストがない場合には
<br>　エラーをPostNotificationで通知するようにしています
<br>
<br>　<img width="600"  src="https://user-images.githubusercontent.com/40127279/127756605-71693881-81be-4630-8d82-e9629b9fe81b.png">

#### 背景
　Lesson13のFavorite Pagesワークフローからの派生です
<br>　お気に入りサイトではなく、お気に入り言葉にしてみました
#### 取扱説明
### 機能:
　自分で集めた名言をランダムに表示
### インストール:
　1.[Alfredworkflow](https://github.com/KitanoTamotsu/meigen/releases/download/1.0/meigen.alfredworkflow.zip)をダウンロード 
<br>　2.ファイルをダブルクリックしてワークフローに登録
### 使い方:
　Hotkey『⌥M』で選択中のテキストを名言集に登録（出典の記入が必要）
<br>　（ホットキーはご自身で設定が必要です）
<br>　キーワード『meigen』を入力すると、自分で集めた名言をランダムに表示

<br>
[トップページに戻る](https://kitanotamotsu.github.io/)

